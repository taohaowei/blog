<div id="article_content" class="article_content tracking-ad" data-mod="popu_307" data-dsm="post">

<p style="margin-top:0px; margin-bottom:24px; color:rgb(20,20,18); font-family:&quot;Source Sans Pro&quot;,Helvetica,sans-serif; font-size:16px">
<a target="_blank" href="http://www.litrin.net/2013/03/27/web%E7%BD%91%E7%AB%99%E7%9A%84%E5%87%A0%E4%B8%AA%E5%B9%B6%E5%8F%91%E9%87%8F%E7%BA%A7/">转载来自此</a></p>
<p style="margin-top:0px; margin-bottom:24px; color:rgb(20,20,18); font-family:&quot;Source Sans Pro&quot;,Helvetica,sans-serif; font-size:16px">
评价一个网站的“大小”，处于视角的不同，有很多种衡量的方法，类似文章数，页面数之类的数据非常明显，也没有什么可以争议的。但对于并发来说，争议非常之多，这里就从一个技术的角度开始，谈谈几个Web网站的数量级。</p>
<p style="margin-top:0px; margin-bottom:24px; color:rgb(20,20,18); font-family:&quot;Source Sans Pro&quot;,Helvetica,sans-serif; font-size:16px">
相信很多人谈论一个网站的热度，总免不了会询问日均PV，同时在线人数、注册用户数等运营数据，说实话从技术角度来说，这几个数值没有一个可以放在一起比较的——一个静态网站的PV跟一个SNS类/Web Game网站的PV根本就不是一回事。由于互联网有一个传说中的“3秒定律”，可能当下更多的网站技术指标要求1.5秒以内加载整页，或者至少可以达到阅读的标准。如果要较真什么“同时在线”，毫不客气的说，对于HTTP这类短链接的网络协议来说，在WebSocket还不普及的时代，能统计在线纯属扯淡，唯一能做的只是取个时间段，计算下访问用户而已。这些依然可以换算成QPS（Quest
 Per Second每秒请求数）。就并发而言，我唯一推崇的只有理论最大QPS和悲观QPS。</p>
<p style="margin-top:0px; margin-bottom:24px; color:rgb(20,20,18); font-family:&quot;Source Sans Pro&quot;,Helvetica,sans-serif; font-size:16px">
<span id="more-1928" style=""></span></p>
<p style="margin-top:0px; margin-bottom:24px; color:rgb(20,20,18); font-family:&quot;Source Sans Pro&quot;,Helvetica,sans-serif; font-size:16px">
这里就大致根据理论最大QPS，给网站做几个分类</p>
<p style="margin-top:0px; margin-bottom:24px; color:rgb(20,20,18); font-family:&quot;Source Sans Pro&quot;,Helvetica,sans-serif; font-size:16px">
<span style="">50QPS以下——小网站</span></p>
<p style="margin-top:0px; margin-bottom:24px; color:rgb(20,20,18); font-family:&quot;Source Sans Pro&quot;,Helvetica,sans-serif; font-size:16px">
没什么好说的，简单的小网站而已，就如同<a target="_blank" href="http://www.litrin.net/" style="color:rgb(188,54,10)">本站</a>这样，你可以用最简单的方法快速搭建，短期没有太多的技术瓶颈，只要服务器不要太烂就好。</p>
<p style="margin-top:0px; margin-bottom:24px; color:rgb(20,20,18); font-family:&quot;Source Sans Pro&quot;,Helvetica,sans-serif; font-size:16px">
<span style="">50～100QPS——DB极限型</span></p>
<p style="margin-top:0px; margin-bottom:24px; color:rgb(20,20,18); font-family:&quot;Source Sans Pro&quot;,Helvetica,sans-serif; font-size:16px">
大部分的关系型<a href="http://lib.csdn.net/base/mysql" class="replace_word" title="MySQL知识库" target="_blank" style="color:#df3434; font-weight:bold;">数据库</a>的每次请求大多都能控制在0.01秒左右，即便你的网站每页面只有一次DB请求，那么页面请求无法保证在1秒钟内完成100个请求，这个阶段要考虑做Cache或者多DB负载。无论那种方案，网站重构是不可避免的。</p>
<p style="margin-top:0px; margin-bottom:24px; color:rgb(20,20,18); font-family:&quot;Source Sans Pro&quot;,Helvetica,sans-serif; font-size:16px">
<span style="">300～800QPS——带宽极限型</span></p>
<p style="margin-top:0px; margin-bottom:24px; color:rgb(20,20,18); font-family:&quot;Source Sans Pro&quot;,Helvetica,sans-serif; font-size:16px">
目前服务器大多用了IDC提供的“百兆带宽”，这意味着网站出口的实际带宽是8M Byte左右。假定每个页面只有10K Byte，在这个并发条件下，百兆带宽已经吃完。首要考虑是CDN加速／异地缓存，多机负载等技术。</p>
<p style="margin-top:0px; margin-bottom:24px; color:rgb(20,20,18); font-family:&quot;Source Sans Pro&quot;,Helvetica,sans-serif; font-size:16px">
<span style="">500～1000QPS——内网带宽极限＋Memcache极限型</span></p>
<p style="margin-top:0px; margin-bottom:24px; color:rgb(20,20,18); font-family:&quot;Source Sans Pro&quot;,Helvetica,sans-serif; font-size:16px">
由于Key/value的特性，每个页面对memcache的请求远大于直接对DB的请求，Memcache的悲观并发数在2w左右，看似很高，但事实上大多数情况下，首先是有可能在次之前内网的带宽就已经吃光，接着是在8K QPS左右的情况下，Memcache已经表现出了不稳定，如果代码上没有足够的优化，可能直接将压力转嫁到了DB层上，这就最终导致整个系统在达到某个阀值之上，性能迅速下滑。</p>
<p style="margin-top:0px; margin-bottom:24px; color:rgb(20,20,18); font-family:&quot;Source Sans Pro&quot;,Helvetica,sans-serif; font-size:16px">
<span style="">1000～2000QPS——FORK/SELECT，锁模式极限型</span></p>
<p style="margin-top:0px; margin-bottom:24px; color:rgb(20,20,18); font-family:&quot;Source Sans Pro&quot;,Helvetica,sans-serif; font-size:16px">
好吧，一句话：线程模型决定吞吐量。不管你系统中最常见的锁是什么锁，这个级别下，文件系统访问锁都成为了灾难。这就要求系统中不能存在中央节点，所有的数据都必须分布存储，数据需要分布处理。总之，关键词：分布</p>
<p style="margin-top:0px; margin-bottom:24px; color:rgb(20,20,18); font-family:&quot;Source Sans Pro&quot;,Helvetica,sans-serif; font-size:16px">
<span style="">2000QPS以上——C10K极限</span></p>
<p style="margin-top:0px; margin-bottom:24px; color:rgb(20,20,18); font-family:&quot;Source Sans Pro&quot;,Helvetica,sans-serif; font-size:16px">
尽管现在很多应用已经实现了C25K，但短板理论告诉我们，决定网站整体并发的永远是最低效的那个环节。我承认我生涯中从未遇到过2000QPS以上，甚至1.5K以上的网站，希望有此经验的哥们可以一起交流下</p>
   
</div>